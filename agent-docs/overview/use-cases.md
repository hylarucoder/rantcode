# rantcode 的意义与典型使用场景（草稿）

> 本文是草稿版，用来整理「这个工具存在的意义」以及几类典型用户场景，后续可以对每个场景再细化流程与交互设计。

## 1. 这个工具要解决什么问题？

- 现实情况：
  - 现在大家有了很强的代码模型（例如 GPT‑5.1、Claude 4.5 Sonnet），
    但**落地到具体仓库里的工作流依然很碎**：
    - 一会儿在浏览器聊天，一会儿在 IDE 插件里跑，一会儿去看 Git diff；
    - 文档写在 Notion / 飞书 / README，和真实代码、提交历史经常不同步。
- rantcode 想做的是：
  - 把「**文档、代码、任务、Diff**」这些碎片拉回到同一个本地工作台里，
  - 让任何一个代码助手（GPT / Claude / 本地 coder）都有一个**稳定、可重复的工作环境**，
  - 用文档驱动，而不是只靠临时 prompt。

可以理解为：这是一个“**给代码助手用的 IDE 附属驾驶舱**”，把模型放进一个有纪律的工作流里。

## 2. 谁会用它？（用户画像草稿）

- 目标用户大致有几类（可以后续再细化）：
  1. **独立开发者 / 小团队 Tech Lead**
     - 同时维护多个仓库，希望把“需求 → 设计 → 实现 → Diff → 回顾”这些环节交给 AI 帮忙梳理。
  2. **重度工程师 + AI 重度使用者**
     - 手上已经有 GPT‑5.1 / Claude 4.5 / 本地 LLM，想要一个更“工程化”的外壳来管理它们；
     - 不满足于浏览器聊天，希望有更贴近 Git / 文档结构的 UI。
  3. **带新人 / 做知识沉淀的人**
     - 想要用文档 + AI 帮团队形成一套统一的“怎么改代码”的路径，而不是口口相传。

后续可以在这里再写一两个具体人物画像（年龄、角色、日常工作节奏等）。

## 3. 典型使用场景（初稿）

下面只先列标题 + 一两句说明，后续可以为每个场景单独开文档细化。

### 场景 A：第一次接手一个陌生仓库

- 步骤轮廓：
  - 在 rantcode 中添加项目 → 打开 Workspace →
  - 用 Explorer 浏览 `agent-docs/overview/` 和 `agent-docs/design/` →
  - 右列预览 + TOC 快速扫一遍重要章节 →
  - 开一个「Onboarding 会话」，把 docs + 部分文件树交给模型，让它用自己的话总结。
- 意义：
  - 把“看 README + 翻代码 + 问同事”的流程，收束到一个更有结构的入口。

### 场景 B：从 Task 文档驱动一个小 feature

- 步骤轮廓：
  - 在 `agent-docs/task/` 写/选一个任务条目（带状态、owner、优先级）；
  - 在 Workspace 中选中文件 → 右侧预览当前文档 →
  - 开一个专门的会话，把这个 Task 作为上下文，让模型生成修改建议 / 代码片段；
  - 用 Diff 视图检查模型生成的改动是否符合 Spec 文档；
  - 修改完成后更新 Task 状态、补充 Spec。
- 意义：
  - 强调“**先有 Task / Spec，后有改动**”，而不是纯聊天的 adhoc 改代码。

### 场景 C：在大改动后，用模型做一次「文档 & 代码回顾」

- 步骤轮廓：
  - 做完一轮较大的重构或功能开发；
  - 在 Diff 视图查看所有变更，按 group 分组；
  - 开一个 Review 会话，让模型基于 Diff 给出总结、风险点、需要更新的文档位置；
  - 根据建议更新 `agent-docs/design/` 和 `agent-docs/spec/` 对应章节。
- 意义：
  - 把“代码 review + 文档补齐”变成一个可重复的、半自动的 ritual。

### 场景 D：帮新人 Onboarding / 交接项目

- 步骤轮廓：
  - 维护一个 `agent-docs/overview/onboarding.md` 或类似文档；
  - 新人第一次打开 rantcode，选择项目后，默认打开 Onboarding 文档 + 一个预设的会话；
  - 通过会话问任何关于架构、规范、流程的问题，模型尽量都引用仓库内 docs 来回答。
- 意义：
  - 让“口头交接”变成基于文档的交接，同时提供一个随时可问的 AI 导游。

## 4. 通知策略（任务回合完成）

> 通知的目标是：当你把 rantcode 放在后台跑"任务回合"时，**在任何应用里都能知道这一回合已经完成，可以回来看结果**。

- 通知对象：
  - 每次调用 coding agent 被视为一个异步 job（工作回合），从 `pending → running → done/failed`。
  - 通知关注的是 job 的状态变化，而不是 agent 内部的多轮对话。

- 通知方式（优先级）：
  - **系统通知（OS 级）**：
    - 当 job 从 `running → done/failed` 时，通过系统通知告知：例如
      - 「Task #123：登录页重构 的自动修改已完成」
      - 或「当前会话的生成结果已就绪」。
    - 即使 rantcode 在后台、当前焦点在其他应用，也能看到这条通知。
  - 可选的小声音：
    - 可以配置在通知到达时播放一声短提示音，但声音只是辅助，不取代系统通知。

- 与 Task / 看板的关系：
  - **默认只对挂在 Task 上的 job 发通知**：
    - 任何“对代码有影响的较大变更”应当通过 Task 进入，看板上可以看到这个 Task 及其关联回合。
  - 纯文档草稿、新建说明、问答等轻量操作可以不挂 Task，通知策略可以更宽松（例如只在失败时提醒）。

- 无状态回合的前提：
  - 每次 job 都是独立的“文档/Task → 结果”变换，内部 prompt/对话对用户透明。
  - Session 记录 job 的输入意图、产出与日志，但通知只关心“这次回合完成了没有”。

---

> TODO：后续可以针对每个场景拆出更详细的「流程图 / 交互草图」，并在 `agent-docs/design/` 目录下补充对应的设计文档。
